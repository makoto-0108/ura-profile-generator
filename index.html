<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>チャッピーのじつはプロフィール</title>
<style>
  body {
    font-family: sans-serif;
    padding: 20px;
    max-width: 480px;
    margin: auto;
  }
  label {
    display: block;
    margin-top: 15px;
    font-weight: bold;
  }
  input[type="text"] {
    width: 100%;
    padding: 8px;
    margin-top: 5px;
    font-size: 1rem;
    box-sizing: border-box;
  }
  button {
    margin-top: 20px;
    padding: 12px;
    font-size: 1.1rem;
    background-color: #1da1f2;
    color: white;
    border: none;
    border-radius: 6px;
    cursor: pointer;
  }
  #shareBtn {
    margin-top: 10px;
    padding: 10px;
    background: #1da1f2;
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 1rem;
  }
  pre {
    margin-top: 20px;
    background: #f5f8fa;
    padding: 15px;
    white-space: pre-wrap;
    border-radius: 6px;
    font-size: 1rem;
    min-height: 140px;
  }
</style>
</head>
<body>

<h1>チャッピーのじつはプロフィール</h1>

<form id="quizForm">
  <label for="q1">Q1. やめたいけど、ついやっちゃうことは？（一言で）</label>
  <input type="text" id="q1" placeholder="例：元恋人のSNSをチェックしてしまう" required />

  <label for="q2">Q2. 他人から見たら“え？”って思われそうなマイルールは？（一言で）</label>
  <input type="text" id="q2" placeholder="例：左足からしか靴下を履かない" required />

  <label for="q3">Q3. 思い返すと今でもちょっと恥ずかしい黒歴史は？（一言で）</label>
  <input type="text" id="q3" placeholder="例：厨二病っぽいHNを使っていた" required />

  <label for="q4">Q4. こっそり誇ってる、自分の変な才能は？（一言で）</label>
  <input type="text" id="q4" placeholder="例：一度行った店の位置をGoogleマップ無しで覚えてる" required />

  <label for="q5">Q5. なぜか未だに苦手なもの・ことは？（一言で）</label>
  <input type="text" id="q5" placeholder="例：電話" required />

  <button type="submit">診断する</button>
</form>

<button id="shareBtn" type="button">Xでシェアする</button>

<pre id="result"></pre>

<script>
  const form = document.getElementById('quizForm');
  const resultBox = document.getElementById('result');
  const shareBtn = document.getElementById('shareBtn');

  form.addEventListener('submit', e => {
    e.preventDefault();

    const q1 = document.getElementById('q1').value.trim();
    const q2 = document.getElementById('q2').value.trim();
    const q3 = document.getElementById('q3').value.trim();
    const q4 = document.getElementById('q4').value.trim();
    const q5 = document.getElementById('q5').value.trim();

    const lines = [
  `やめたいのにやっちゃう「${q1}」…そのガマン弱さ、人間だもんね？`,
  `みんなが「え？」となるマイルールは「${q2}」で、実は密かなチャームポイント。`,
  `ちょっと恥ずかしい黒歴史「${q3}」、今ではいいネタにしかならないね！`,
  `隠れた才能「${q4}」、さすがあなただけの特技、笑いが止まらない！`,
  `苦手な「${q5}」、でもそれを言い訳にしないあなたはなかなかのツワモノ。`,
  `#じつはプロフィール`
];


    let output = lines.join('\n');
    if (output.length > 140) {
      output = output.slice(0, 137) + '...';
    }

    resultBox.textContent = output;
  });

  shareBtn.addEventListener('click', () => {
    const text = resultBox.textContent;
    if (!text) {
      alert('まずは「診断する」を押して結果を生成してください。');
      return;
    }
    const urlEncodedText = encodeURIComponent(text);
    const shareUrl = `https://twitter.com/intent/tweet?text=${urlEncodedText}`;
    window.open(shareUrl, '_blank');
  });
</script>

</body>
</html>
